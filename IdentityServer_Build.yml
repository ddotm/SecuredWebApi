pool:
  name: Hosted Windows Container
  demands:
  - msdeploy
variables:
  BuildConfiguration: 'IdentityServer_Release'

trigger:
  batch: true
  branches:
    include: [master]
  paths:
    include: [IdentityServer]

steps:
- task: DotNetCoreCLI@2
  displayName: 'dotnet build'
  inputs:
    arguments: '--configuration $(BuildConfiguration) /p:DeployOnBuild=true /p:WebPublishMethod=Package /p:PackageAsSingleFile=true /p:PublishProfile=Properties/PublishProfiles/IdentityServer_Publish.pubxml'
  timeoutInMinutes: 10
